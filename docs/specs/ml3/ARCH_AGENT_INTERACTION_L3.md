ARCH_AGENT_INTERACTION_L3.md

üìç –ü—É—Ç—å: docs/specs/ml3/ARCH_AGENT_INTERACTION_L3.md

ARCH_AGENT_INTERACTION_L3.md

MindForge ¬∑ Agent-to-Agent Interaction Architecture (L3)

1. Purpose / –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–£—Ä–æ–≤–µ–Ω—å L3 –≤–≤–æ–¥–∏—Ç –º–µ–∂–∞–≥–µ–Ω—Ç–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–∞–∫ –Ω–æ–≤—ã–π —Ç–∏–ø –¥–æ—Å—Ç—É–ø–∞ –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ MindForge.

–¶–µ–ª—å L3 ‚Äî –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π, –∞—É–¥–∏—Ä—É–µ–º—ã–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏-—Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã–π –æ–±–º–µ–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏, –Ω–µ –Ω–∞—Ä—É—à–∞—è –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∑–∞–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–∞ —É—Ä–æ–≤–Ω—è—Ö L1 –∏ L2.

–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:

Agent-to-Agent Interaction = Access Control Problem,
–∞ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ –¥–æ–≤–µ—Ä–∏—è, –ø–∞–º—è—Ç–∏ –∏–ª–∏ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π.

L3 –Ω–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É L1/L2, –∞ —Ä–∞—Å—à–∏—Ä—è–µ—Ç –µ—ë, –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å provider‚Äô–æ–≤ ‚Äî Agent Providers.

2. Architectural Position
2.1 –ü–æ–∑–∏—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
Agent A (Initiator)
        ‚Üì
   (intent: agent_query)
        ‚Üì
       UAG
 (policy enforcement + routing)
        ‚Üì
Agent B (Provider)
        ‚Üì
   (filtered response)
        ‚Üë
       UAG
        ‚Üë
Agent A

2.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç

Mandatory Gateway Rule (Extended):
–õ—é–±–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∞–≥–µ–Ω—Ç ‚Üí –∞–≥–µ–Ω—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ UAG.

‚ùå –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã
‚ùå Shared memory –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–∞
‚ùå Agent-to-Agent RPC –∑–∞–ø—Ä–µ—â—ë–Ω

–õ—é–±–∞—è –ø–æ–ø—ã—Ç–∫–∞ –æ–±—Ö–æ–¥–∞ ‚Üí –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è L3.

3. Core Principles / –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã L3
3.1 Policy-driven Access

–ê–≥–µ–Ω—Ç B –ø—É–±–ª–∏–∫—É–µ—Ç Capability Contract ‚Äî —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ:

—á—Ç–æ –æ–Ω –≥–æ—Ç–æ–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å,

–∫–æ–º—É,

–≤ –∫–∞–∫–æ–º –æ–±—ä—ë–º–µ,

–ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö.

–ê–≥–µ–Ω—Ç A –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∫ –∑–∞–¥–µ–∫–ª–∞—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º capability.

3.2 No Agent Trust

–ê–≥–µ–Ω—Ç—ã –Ω–µ –¥–æ–≤–µ—Ä—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É.

Agent A –Ω–µ –¥–æ–≤–µ—Ä—è–µ—Ç Agent B

Agent B –Ω–µ –¥–æ–≤–µ—Ä—è–µ—Ç Agent A

UAG ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∞—Ä–±–∏—Ç—Ä

–ê–≥–µ–Ω—Ç –Ω–∏–∫–æ–≥–¥–∞:

–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ,

–Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–π –æ –¥–æ—Å—Ç—É–ø–µ,

–Ω–µ –∑–Ω–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª–∏—Ç–∏–∫.

3.3 User Consent

–ü—Ä–∞–≤–∏–ª–∞ –º–µ–∂–∞–≥–µ–Ω—Ç–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∞–≥–µ–Ω—Ç–∞ B (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π).

Consent –≤—ã—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ Capability Contract, —Ö—Ä–∞–Ω–∏–º–æ–≥–æ –∏ –ø—Ä–∏–º–µ–Ω—è–µ–º–æ–≥–æ UAG.

–ê–≥–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç ¬´—Ä–∞–∑—Ä–µ—à–∏—Ç—å¬ª –¥–æ—Å—Ç—É–ø —Å–∞–º ‚Äî —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü —á–µ—Ä–µ–∑ –ø–æ–ª–∏—Ç–∏–∫–∏.

3.4 Data Minimization

–û—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞ B:

—Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è UAG, –∞ –Ω–µ –∞–≥–µ–Ω—Ç–æ–º,

—Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –ø–æ–ª—è,

–Ω–µ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–±–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, reasoning –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç.

–ê–≥–µ–Ω—Ç B –º–æ–∂–µ—Ç –æ—Ç–¥–∞—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏,
–Ω–æ UAG –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∏–µ.

4. Interaction Model
4.1 –¢–∏–ø –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

–í L3 –≤–≤–æ–¥–∏—Ç—Å—è –Ω–æ–≤—ã–π —Ç–∏–ø intent:

intent: agent_query

4.2 –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –∑–∞–ø—Ä–æ—Å–∞
{
  "agent_id": "agent_a",
  "intent": "agent_query",
  "target_agent": "agent_b",
  "capability": "get_public_profile",
  "context": {
    "env": "sandbox"
  }
}

4.3 –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏

Agent A —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç agent_query

UAG:

–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç intent

–ø—Ä–æ–≤–µ—Ä—è–µ—Ç Capability Contract

–ø—Ä–æ–≤–µ—Ä—è–µ—Ç allowed_callers

–ø—Ä–∏–º–µ–Ω—è–µ—Ç field-level filtering

–ó–∞–ø—Ä–æ—Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç—Å—è Agent B

–û—Ç–≤–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ UAG

UAG —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç

–û—Ç–≤–µ—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è Agent A

–°–æ–±—ã—Ç–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

5. Capability Contract
5.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

Capability Contract –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–≥–µ–Ω—Ç–∞ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤.

–≠—Ç–æ –Ω–µ –∫–æ–¥, –∞ policy artifact.

5.2 –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–ø—Ä–∏–º–µ—Ä)
agent_id: agent_b
capabilities:
  - name: get_public_profile
    scope: public
    allowed_callers:
      - agent_a
    exposed_fields:
      - name
      - service_type
    constraints:
      rate_limit: 10/min

5.3 –•—Ä–∞–Ω–µ–Ω–∏–µ

–†–µ—à–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–ø—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ):

Capability Contracts —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ UAG Registry

–ê–≥–µ–Ω—Ç B –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏–º–∏ –Ω–∞–ø—Ä—è–º—É—é

–ò–∑–º–µ–Ω–µ–Ω–∏—è ‚Üí —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π / –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç—É—Ä

6. Role of UAG in L3

–í L3 UAG —Ä–∞—Å—à–∏—Ä—è–µ—Ç —Å–≤–æ–∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:

–•—Ä–∞–Ω–µ–Ω–∏–µ Capability Contracts

–í–∞–ª–∏–¥–∞—Ü–∏—è agent_query

–ü—Ä–æ–≤–µ—Ä–∫–∞ user consent

–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤

–ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –º–µ–∂–∞–≥–µ–Ω—Ç–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–æ–≤

UAG –æ—Å—Ç–∞—ë—Ç—Å—è:

Policy Enforcement Point, –∞ –Ω–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π.

7. Failure Modes & Security
7.1 DENY

DENY –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –µ—Å–ª–∏:

capability –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

caller –Ω–µ —Ä–∞–∑—Ä–µ—à—ë–Ω

scope –∑–∞–ø—Ä–µ—â—ë–Ω

–Ω–∞—Ä—É—à–µ–Ω—ã constraints

DENY:

–Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–µ–π

–ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∞–≥–µ–Ω—Ç–æ–º

7.2 SUSPENDED (Critical)

–ê–≥–µ–Ω—Ç –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ SUSPENDED, –µ—Å–ª–∏:

–ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ –¥—Ä—É–≥–æ–º—É –∞–≥–µ–Ω—Ç—É

–ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å –ø–æ—Å–ª–µ DENY

–ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–∏—Ç—å capability

–∏—Å–ø–æ–ª—å–∑—É–µ—Ç agent_query –∫–∞–∫ –æ–±—Ö–æ–¥ Memory / KB

8. Relationship with L2
8.1 Memory

–ê–≥–µ–Ω—Ç –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–º—è—Ç–∏ –¥—Ä—É–≥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

–õ—é–±–æ–π ¬´–¥–æ—Å—Ç—É–ø –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é¬ª –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∞–≥–µ–Ω—Ç B —è–≤–Ω–æ –ø—É–±–ª–∏–∫—É–µ—Ç capability

8.2 Knowledge Base

KB –æ—Å—Ç–∞—ë—Ç—Å—è provider‚Äô–æ–º

Agent-to-Agent Interaction –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç KB

–ó–∞–ø—Ä–æ—Å –∑–Ω–∞–Ω–∏–π –¥—Ä—É–≥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ = capability, –∞ –Ω–µ KB query

9. Example Flow (Conceptual)
Agent A ‚Üí agent_query(get_public_profile)
        ‚Üí UAG
            ‚Üí policy check
            ‚Üí route
        ‚Üí Agent B
            ‚Üí returns data
        ‚Üí UAG
            ‚Üí field filtering
        ‚Üí Agent A

10. Explicit Decisions Required (for Approval)

–§–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è Capability Contracts

‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: UAG Registry

–ù–∞–∑–≤–∞–Ω–∏–µ intent

–í–∞—Ä–∏–∞–Ω—Ç—ã:

agent_query (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

inter_agent_request

–ù–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–∏ Fake Agent Provider –¥–ª—è L3 sandbox?

‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –¥–∞ (–∞–Ω–∞–ª–æ–≥ fake_memory_provider)

11. Status

Document: ARCH_AGENT_INTERACTION_L3.md

Level: L3

Status: PROPOSED

Authority: Chief Architect / Project Owner

üîí –ò—Ç–æ–≥–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞ L3

Agent –¥—É–º–∞–µ—Ç.
UAG —Ä–µ—à–∞–µ—Ç.
–î—Ä—É–≥–æ–π –∞–≥–µ–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç ‚Äî —Å—Ç—Ä–æ–≥–æ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º.
Logs –¥–æ–∫–∞–∑—ã–≤–∞—é—Ç.
Polygon –ø—Ä–æ–≤–µ—Ä—è–µ—Ç.